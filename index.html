<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SYSTEM_ROOT // LINKYUW_CV</title>
    <style>
        :root {
            --bg-color: #050505;
            --matrix-green: #00FF41;
            --dim-green: #008F11;
            --alert-red: #FF0000;
            --font-main: 'Courier New', Courier, monospace;
        }

        * {
            box-sizing: border-box;
            border-radius: 0 !important;
        }

        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            background-color: var(--bg-color);
            font-family: var(--font-main);
            color: var(--matrix-green);
            overflow: hidden;
        }

        #matrix-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0.15;
        }

        .scanlines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.2));
            background-size: 100% 4px;
            z-index: 1;
            pointer-events: none;
        }

        .terminal-wrapper {
            position: absolute;
            z-index: 10;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 1200px;
            height: 90vh;
            border: 3px solid var(--matrix-green);
            background: rgba(0, 5, 0, 0.95);
            display: grid;
            grid-template-rows: auto 1fr auto;
            box-shadow: 10px 10px 0px rgba(0, 255, 65, 0.2);
        }

        .sys-header {
            background: var(--matrix-green);
            color: black;
            padding: 15px 20px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            text-transform: uppercase;
            border-bottom: 3px solid var(--matrix-green);
        }
        
        .sys-title { font-size: 1.5rem; letter-spacing: -1px; }
        .sys-status { font-size: 0.9rem; }

        .main-interface {
            display: grid;
            grid-template-columns: 250px 1fr;
            overflow: hidden;
        }

        .nav-panel {
            border-right: 3px solid var(--matrix-green);
            padding: 20px 0;
            display: flex;
            flex-direction: column;
        }

        .nav-item {
            background: transparent;
            color: var(--matrix-green);
            border: none;
            border-bottom: 1px solid var(--dim-green);
            padding: 20px 25px;
            text-align: left;
            font-family: var(--font-main);
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: 0.2s;
            text-transform: uppercase;
        }
        .nav-item:hover { background: rgba(0, 255, 65, 0.1); padding-left: 35px; }
        .nav-item.active { background: var(--matrix-green); color: black; padding-left: 35px; }
        .nav-item::before { content: "> "; }

        .content-viewport {
            padding: 40px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--matrix-green) black;
            position: relative;
        }
        .content-viewport::-webkit-scrollbar { width: 12px; }
        .content-viewport::-webkit-scrollbar-track { background: black; border-left: 1px solid var(--dim-green); }
        .content-viewport::-webkit-scrollbar-thumb { background: var(--matrix-green); border: 2px solid black; }

        h1 { font-size: 2.5rem; border-bottom: 5px solid var(--matrix-green); display: inline-block; margin-bottom: 30px; line-height: 1; padding-bottom: 5px; }
        h2 { color: var(--bg-color); background: var(--matrix-green); display: inline-block; padding: 5px 10px; margin-top: 40px; margin-bottom: 20px; font-size: 1.2rem; text-transform: uppercase; }
        p { line-height: 1.8; margin-bottom: 20px; max-width: 800px; font-size: 1.05rem; }

        .data-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-top: 20px; }
        .data-card { border: 2px solid var(--dim-green); padding: 20px; transition: 0.2s; }
        .data-card:hover { border-color: var(--matrix-green); box-shadow: 5px 5px 0 var(--dim-green); transform: translate(-2px, -2px); }
        .tag { display: inline-block; border: 1px solid var(--matrix-green); padding: 2px 8px; font-size: 0.8rem; margin-right: 5px; margin-top: 10px; }

        .kernel-params { font-size: 0.9rem; border: 1px dashed var(--dim-green); padding: 15px; color: #ccc; font-family: monospace; margin-bottom: 30px; background: rgba(255,255,255,0.05); }
        .sys-footer { border-top: 3px solid var(--matrix-green); padding: 10px 20px; font-size: 0.8rem; text-align: right; background: #000; }

        /* === 游戏全屏样式 === */
        #game-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            border: 4px solid #222;
            background: #000;
            position: relative;
        }

        #battle-scene {
            flex: 1;
            position: relative;
            background: #e0f8d0;
            background-image: linear-gradient(#c0d8b0 1px, transparent 1px), linear-gradient(90deg, #c0d8b0 1px, transparent 1px);
            background-size: 20px 20px;
            overflow: hidden;
            image-rendering: pixelated;
        }

        /* 角色与血条容器定位 */
        .combatant-wrapper {
            position: absolute;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 200px; /* 增加容器宽度以适应大图 */
        }

        /* 敌方 (右上) */
        #enemy-wrapper {
            top: 30px;
            right: 60px;
        }

        /* 我方 (左下) */
        #player-wrapper {
            bottom: 30px;
            left: 60px;
        }

        .sprite {
            width: 180px; /* 放大角色 */
            height: 180px; /* 放大角色 */
            object-fit: contain;
            z-index: 2;
        }
        
        /* 血条样式 - 放在角色下方 */
        .hp-box {
            background: #fff;
            border: 2px solid #444;
            padding: 4px 8px;
            margin-top: 5px; /* 与精灵的间距 */
            width: 100%;
            box-shadow: 2px 2px 0 rgba(0,0,0,0.2);
            z-index: 1;
            color: #000;
            font-family: 'Courier New', Courier, monospace;
        }

        .hp-bar-bg {
            width: 100%;
            height: 8px;
            background: #555;
            margin-top: 4px;
            border: 1px solid #222;
            overflow: hidden;
        }
        
        .hp-fill {
            height: 100%;
            background: #4caf50;
            width: 100%;
            transition: width 0.5s;
        }
        
        .name-row {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            font-weight: bold;
        }

        /* 控制台 */
        .game-controls {
            height: 120px;
            background: #2d2d2d;
            border-top: 4px solid #000;
            padding: 15px;
            display: flex;
            gap: 20px;
            color: #fff;
            font-family: 'Courier New', Courier, monospace;
        }

        .dialog-text {
            flex: 1.5;
            font-size: 14px;
            line-height: 1.6;
            border: 2px solid #444;
            padding: 10px;
            background: #222;
        }

        .action-menu {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        .move-btn {
            background: #eee;
            color: #000;
            border: 2px solid #999;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            text-transform: uppercase;
            font-size: 12px;
            transition: 0.1s;
        }

        .move-btn:hover {
            background: #fff;
            border-color: var(--matrix-green);
            color: var(--dim-green);
        }

        .move-btn:active {
            background: #ccc;
            transform: translateY(2px);
        }
        
        /* 胜利特效 */
        #win-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 99;
        }
        
        .win-text {
            font-size: 80px;
            color: #ffd700;
            text-shadow: 4px 4px 0 #b8860b, -2px -2px 0 #fff;
            font-weight: 900;
            animation: bounce 1s infinite alternate;
            letter-spacing: 5px;
        }

        @keyframes bounce { from { transform: scale(1); } to { transform: scale(1.1); } }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
        @keyframes shake { 0% { transform: translate(0, 0); } 20% { transform: translate(-5px, 0); } 40% { transform: translate(5px, 0); } 60% { transform: translate(-5px, 0); } 80% { transform: translate(5px, 0); } 100% { transform: translate(0, 0); } }
        @keyframes attackFwd { 0% { transform: translate(0,0); } 50% { transform: translate(30px, -30px); } 100% { transform: translate(0,0); } }

        @media (max-width: 768px) {
            .main-interface { grid-template-rows: auto 1fr; }
            #game-container { font-size: 0.8rem; }
            .sprite { width: 130px; height: 130px; } /* 移动端也相应放大 */
            .combatant-wrapper { width: 150px; }
            #enemy-wrapper { top: 10px; right: 10px; }
            #player-wrapper { bottom: 10px; left: 10px; }
            .win-text { font-size: 40px; }
        }
    </style>
</head>
<body>

    <canvas id="matrix-canvas"></canvas>
    <div class="scanlines"></div>

    <div class="terminal-wrapper">
        <div class="sys-header">
            <div class="sys-title">LINKYUW_TERMINAL_V3.1</div>
            <div class="sys-status">
                [MODE: INTERACTIVE]<br>
                [LOC: TAIWAN]
            </div>
        </div>

        <div class="main-interface">
            <nav class="nav-panel">
                <button class="nav-item active" onclick="switchTab('overview')">/SYS/OVERVIEW</button>
                <button class="nav-item" onclick="switchTab('research')">/DIR/RESEARCH</button>
                <button class="nav-item" onclick="switchTab('projects')">/DIR/PROJECTS</button>
                <button class="nav-item" onclick="switchTab('thoughts')">/LOG/THOUGHTS</button>
                <button class="nav-item" onclick="switchTab('fun')" style="color: var(--alert-red); border-bottom: 1px solid var(--alert-red);">/EXEC/FUN</button>
            </nav>

            <div class="content-viewport" id="content-area">
                
                <!-- 1. OVERVIEW -->
                <div id="overview" class="tab-content">
                    <h1>APPLICANT_PROFILE</h1>
                    <div class="kernel-params">
                        &gt; LOADING KERNEL CONFIGURATION...<br>
                        &gt; CORE_TRAITS_DETECTED:<br>
                        &nbsp;&nbsp;[SENSITIVITY]: HIGH<br>
                        &nbsp;&nbsp;[BRAVERY]: ACTIVE<br>
                        &nbsp;&nbsp;[SINCERITY]: LOCKED<br>
                        &gt; STATUS: READY.
                    </div>
                    <p>我是Linkyu，欢迎访问我的学术终端。</p>
                    <h2>EDUCATION</h2>
                    <div style="border-left: 4px solid var(--matrix-green); padding-left: 20px; margin-bottom: 20px;">
                        <strong style="font-size: 1.2rem;">[广东财经大学]</strong><br>
                        <span style="color: #ccc;">[数据科学与大数据技术]</span>
                    </div>
                </div>

                <!-- 2. RESEARCH -->
                <div id="research" class="tab-content" style="display: none;">
                    <h1>ACADEMIC_RESEARCH</h1>
                    <div class="data-card">
                        <h3>PAPER_01: 图像识别优化</h3>
                        <div class="tag">PyTorch</div>
                    </div>
                </div>

                <!-- 3. PROJECTS -->
                <div id="projects" class="tab-content" style="display: none;">
                    <h1>ENGINEERING_PROJECTS</h1>
                    <div class="data-grid">
                        <div class="data-card">
                            <strong>NEO_MATRIX_PORTFOLIO</strong>
                            <p style="font-size:0.8rem">HTML5 Canvas 个人终端。</p>
                        </div>
                    </div>
                </div>

                <!-- 4. THOUGHTS -->
                <div id="thoughts" class="tab-content" style="display: none;">
                    <h1>LOGS & THOUGHTS</h1>
                    <div style="border: 1px solid var(--matrix-green); padding: 15px;">
                        <h3>:: 技术专栏 ::</h3>
                        <p>记录技术成长。</p>
                    </div>
                </div>

                <!-- 5. FUN (GAME) -->
                <div id="fun" class="tab-content" style="display: none; height: 100%; padding: 0;">
                    <div id="game-container">
                        <div id="battle-scene">
                            <!-- 胜利遮罩 -->
                            <div id="win-overlay">
                                <div class="win-text">WIN!!</div>
                                <div style="color:white; margin-top:20px; font-family: 'Courier New';">Click anywhere to restart</div>
                            </div>

                            <!-- 敌方容器 (右上) -->
                            <div class="combatant-wrapper" id="enemy-wrapper">
                                <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/104.png" id="enemy-sprite" class="sprite" alt="Cubone">
                                <div class="hp-box">
                                    <div class="name-row"><span>Cubone</span> <span>Lv.40</span></div>
                                    <div class="hp-bar-bg"><div class="hp-fill" id="enemy-hp"></div></div>
                                </div>
                            </div>
                            
                            <!-- 我方容器 (左下) -->
                            <div class="combatant-wrapper" id="player-wrapper">
                                <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/back/725.png" id="player-sprite" class="sprite" alt="Litten">
                                <div class="hp-box">
                                    <div class="name-row"><span>Litten</span> <span>Lv.40</span></div>
                                    <div class="hp-bar-bg"><div class="hp-fill" id="player-hp"></div></div>
                                    <div style="text-align:right; font-size:9px; margin-top:2px;"><span id="hp-text">98</span>/98</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="game-controls">
                            <div class="dialog-text" id="game-text">
                                Wild Cubone appeared!<br>
                                Click a move to attack.
                            </div>
                            <div class="action-menu">
                                <div class="move-btn" onclick="playerAttack(0)">抓</div>
                                <div class="move-btn" onclick="playerAttack(1)">舌舔</div>
                                <div class="move-btn" onclick="playerAttack(2)">火焰牙</div>
                                <div class="move-btn" onclick="playerAttack(3)">闪焰冲锋</div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div class="sys-footer">
            SYSTEM_TIME: <span id="clock">00:00:00</span> // &copy; 2025 LINKYUW
        </div>
    </div>

    <script>
        // === 1. Tab Switch ===
        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(el => el.style.display = 'none');
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            // FUN tab 特殊处理，需要满屏
            const tab = document.getElementById(tabId);
            tab.style.display = 'block';
            if(tabId === 'fun') {
                document.getElementById('content-area').style.padding = '0';
                document.getElementById('content-area').style.overflow = 'hidden';
            } else {
                document.getElementById('content-area').style.padding = '40px';
                document.getElementById('content-area').style.overflowY = 'auto';
            }
            event.currentTarget.classList.add('active');
        }

        // === 2. Clock ===
        setInterval(() => { document.getElementById('clock').innerText = new Date().toLocaleTimeString('en-GB'); }, 1000);

        // === 3. Matrix Rain ===
        const canvas = document.getElementById('matrix-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
        const fontSize = 14;
        const columns = canvas.width / fontSize;
        const drops = Array(Math.floor(columns)).fill(1);

        function draw() {
            ctx.fillStyle = 'rgba(5, 5, 5, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#0F0'; ctx.font = fontSize + 'px monospace';
            for (let i = 0; i < drops.length; i++) {
                const text = chars.charAt(Math.floor(Math.random() * chars.length));
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);
                if (drops[i] * fontSize > canvas.height && Math.random() > 0.985) drops[i] = 0;
                drops[i]++;
            }
        }
        setInterval(draw, 50);
        window.addEventListener('resize', () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; });

        // === 4. Game Engine ===
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        function playTone(freq, type, duration, vol=0.1) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = type;
            osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
            gain.gain.setValueAtTime(vol, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start();
            osc.stop(audioCtx.currentTime + duration);
        }

        function playVictoryMusic() {
            const notes = [
                {f: 523.25, d: 0.15}, {f: 523.25, d: 0.15}, {f: 523.25, d: 0.15}, {f: 523.25, d: 0.4},
                {f: 415.30, d: 0.4},  {f: 466.16, d: 0.4}, {f: 523.25, d: 0.2}, {f: 466.16, d: 0.15}, {f: 523.25, d: 0.8} 
            ];
            let time = audioCtx.currentTime;
            notes.forEach(n => {
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                osc.type = 'square';
                osc.frequency.setValueAtTime(n.f, time);
                gain.gain.setValueAtTime(0.1, time);
                gain.gain.linearRampToValueAtTime(0, time + n.d - 0.05);
                osc.connect(gain);
                gain.connect(audioCtx.destination);
                osc.start(time);
                osc.stop(time + n.d);
                time += n.d;
            });
        }

        const playerMaxHp = 98;
        const enemyMaxHp = 102;
        let playerHp = 98;
        let enemyHp = 102;
        let turn = 'player';

        const playerMoves = [
            { name: "抓", pwr: 40, acc: 100, type: 'normal' },
            { name: "舌舔", pwr: 30, acc: 100, type: 'ghost' },
            { name: "火焰牙", pwr: 65, acc: 95, type: 'fire' },
            { name: "闪焰冲锋", pwr: 120, acc: 100, type: 'fire', recoil: true }
        ];

        const enemyMoves = [
            { name: "报仇", pwr: 70, acc: 100 },
            { name: "投掷", pwr: 100, acc: 100 },
            { name: "跺脚", pwr: 75, acc: 100 },
            { name: "骨棒乱打", pwr: 25, acc: 90, multi: true }
        ];

        const log = document.getElementById('game-text');
        const pSprite = document.getElementById('player-sprite');
        const eSprite = document.getElementById('enemy-sprite');
        const pHpBar = document.getElementById('player-hp');
        const eHpBar = document.getElementById('enemy-hp');
        const hpText = document.getElementById('hp-text');
        const winOverlay = document.getElementById('win-overlay');

        function updateHpUI() {
            const pPct = (playerHp / playerMaxHp) * 100;
            const ePct = (enemyHp / enemyMaxHp) * 100;
            pHpBar.style.width = Math.max(0, pPct) + '%';
            eHpBar.style.width = Math.max(0, ePct) + '%';
            pHpBar.style.backgroundColor = pPct < 20 ? '#ff0000' : (pPct < 50 ? '#ffcc00' : '#4caf50');
            eHpBar.style.backgroundColor = ePct < 20 ? '#ff0000' : (ePct < 50 ? '#ffcc00' : '#4caf50');
            hpText.innerText = Math.max(0, playerHp);
        }

        function playerAttack(idx) {
            if (turn !== 'player') return;
            
            turn = 'busy';
            const move = playerMoves[idx];
            log.innerHTML = `Litten used<br><b>${move.name}!</b>`;
            
            // Anim
            pSprite.style.animation = 'attackFwd 0.2s';
            setTimeout(() => pSprite.style.animation = '', 200);

            setTimeout(() => {
                if (Math.random() * 100 > move.acc) {
                    log.innerHTML = "But it missed!";
                    playTone(150, 'sawtooth', 0.1);
                    setTimeout(enemyTurn, 1000);
                    return;
                }

                playTone(100, 'square', 0.1);
                eSprite.style.animation = 'shake 0.3s';
                
                let dmg = Math.floor((move.pwr * 0.5) * (Math.random() * 0.4 + 0.8));
                if (move.type === 'fire') dmg = Math.floor(dmg * 1.2); 

                enemyHp -= dmg;
                updateHpUI();

                if (move.recoil) {
                    setTimeout(() => {
                        log.innerHTML = "Litten took recoil damage!";
                        playerHp -= Math.floor(dmg / 4);
                        updateHpUI();
                    }, 600);
                }

                setTimeout(() => {
                    eSprite.style.animation = 'float 3s infinite ease-in-out';
                    if (enemyHp <= 0) {
                        winGame();
                    } else if (playerHp <= 0) {
                        loseGame();
                    } else {
                        enemyTurn();
                    }
                }, move.recoil ? 1200 : 1000);
            }, 500);
        }

        function enemyTurn() {
            const move = enemyMoves[Math.floor(Math.random() * enemyMoves.length)];
            log.innerHTML = `Cubone used<br><b>${move.name}!</b>`;

            setTimeout(() => {
                if(move.multi) {
                    // multi hit simulation
                    let hits = 3; 
                    let dmgPerHit = Math.floor((move.pwr * 0.5));
                    let count = 0;
                    let interval = setInterval(() => {
                        playTone(150, 'noise', 0.05);
                        pSprite.style.animation = 'shake 0.1s';
                        playerHp -= dmgPerHit;
                        updateHpUI();
                        count++;
                        if(count >= hits || playerHp <= 0) {
                            clearInterval(interval);
                            pSprite.style.animation = '';
                            finishEnemyTurn(playerHp <= 0);
                        }
                    }, 300);
                } else {
                    playTone(150, 'sawtooth', 0.2);
                    pSprite.style.animation = 'shake 0.3s';
                    let dmg = Math.floor((move.pwr * 0.5) * (Math.random() * 0.4 + 0.8));
                    if (move.name === '跺脚' || move.name === '骨棒乱打') dmg = Math.floor(dmg * 1.5);
                    playerHp -= dmg;
                    updateHpUI();
                    pSprite.style.animation = '';
                    finishEnemyTurn(playerHp <= 0);
                }
            }, 1000);
        }

        function finishEnemyTurn(dead) {
            setTimeout(() => {
                if (dead) {
                    loseGame();
                } else {
                    turn = 'player';
                    log.innerHTML = "What will Litten do?";
                }
            }, 1000);
        }

        function winGame() {
            turn = 'end';
            log.innerHTML = "";
            eSprite.style.opacity = 0;
            winOverlay.style.display = 'flex';
            playVictoryMusic();
        }

        function loseGame() {
            turn = 'end';
            log.innerHTML = "Litten fainted...";
            pSprite.style.opacity = 0.5;
        }

        winOverlay.onclick = function() {
            if(turn === 'end') {
                playerHp = playerMaxHp;
                enemyHp = enemyMaxHp;
                eSprite.style.opacity = 1;
                pSprite.style.opacity = 1;
                winOverlay.style.display = 'none';
                updateHpUI();
                turn = 'player';
                log.innerHTML = "Wild Cubone appeared!";
            }
        }
    </script>
</body>
</html>
